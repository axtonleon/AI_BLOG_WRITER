# AI-Powered Blog Post Creation API

This repository implements an AI-powered blog post creation API using FastAPI and a multi-agent architecture provided by the `smolagents` package. The application supports user registration, authentication, and dynamic blog post creation powered by an AI agent system that handles research, content generation, and editing in the background.

## Features

- **User Management**: Secure registration and authentication using JWT.
- **Blog Post Management**: Create, retrieve, update, and delete blog posts linked to authenticated users.
- **AI-Powered Content Generation**: Leverages a multi-agent system for researching, drafting, and editing blog posts.
- **Asynchronous Background Processing**: Long-running AI tasks are managed asynchronously to ensure a responsive API.
- **Database Integration**: Uses SQLite with SQLAlchemy ORM and Alembic for migrations.
- **Interactive API Documentation**: Automatically generated Swagger UI available via FastAPI.

## Tech Stack

- **FastAPI**: A modern, fast (high-performance) web framework for building APIs with Python.
- **SQLite & SQLAlchemy**: Lightweight database engine and ORM for data modeling.
- **Alembic**: Database migrations tool.
- **JWT**: JSON Web Tokens for stateless authentication.
- **smolagents**: Multi-agent toolkit for orchestrating AI-powered tasks.
- **Pydantic**: Data validation and settings management.
- **Uvicorn**: ASGI server for running the FastAPI application.
- **pytest**: Testing framework for Python.

## Getting Started

### Prerequisites

- Python 3.8 or higher
- Git

### Clone the Repository

```bash
git clone https://github.com/yourusername/fastapi_blog_api.git
cd fastapi_blog_api
```

````

### Create and Activate a Virtual Environment

```bash
python -m venv venv
# On macOS/Linux:
source venv/bin/activate
# On Windows:
venv\Scripts\activate
```

### Install Dependencies

```bash
pip install -r requirements.txt
```

### Configure Environment Variables

1. Copy the provided example file:
   ```bash
   cp .env.example .env
   ```
2. Update the variables in `.env` as needed (e.g., set a strong `SECRET_KEY`).

### Running the Application

Start the development server using Uvicorn:

```bash
uvicorn main:app --reload
```

The API is now available at: [http://127.0.0.1:8000](http://127.0.0.1:8000)

Access the interactive API docs at: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

## API Endpoints

The API endpoints are versioned under `/api/v1/` and are divided into two primary sections: **User Endpoints** and **Blog Post Endpoints**.

### User Endpoints

#### `POST /api/v1/users/register`

- **Description:**
  Registers a new user. This endpoint accepts a JSON payload containing a `username` and `password`, hashes the password, and stores the user in the SQLite database.
- **Request Body Example:**
  ```json
  {
    "username": "exampleuser",
    "password": "examplepass123"
  }
  ```
- **Response Example:**
  ```json
  {
    "id": 1,
    "username": "exampleuser"
  }
  ```

#### `POST /api/v1/users/login`

- **Description:**
  Authenticates an existing user. Upon providing a valid username and password, this endpoint returns a JWT access token that is used to authenticate subsequent requests.
- **Request Body Example:**
  ```json
  {
    "username": "exampleuser",
    "password": "examplepass123"
  }
  ```
- **Response Example:**
  ```json
  {
    "access_token": "your_jwt_token_here",
    "token_type": "bearer"
  }
  ```

### Blog Post Endpoints

#### `POST /api/v1/blogs`

- **Description:**
  Creates a new blog post entry. This endpoint accepts a JSON payload with a blog post `title` (and optionally, content, though typically content is generated by the AI agent). Once the blog post entry is created, a background task is triggered to generate the blog post content using the AI-powered multi-agent system.
- **Request Body Example:**
  ```json
  {
    "title": "Top 5 Products Released at CES 2025"
  }
  ```
- **Response Example:**
  ```json
  {
    "id": 1,
    "title": "Top 5 Products Released at CES 2025",
    "content": "",
    "status": "pending",
    "owner_id": 1
  }
  ```

#### `GET /api/v1/blogs`

- **Description:**
  Retrieves a list of all blog posts associated with the authenticated user.
- **Response Example:**
  ```json
  [
    {
      "id": 1,
      "title": "Top 5 Products Released at CES 2025",
      "content": "Generated content will appear here once processing is complete.",
      "status": "completed",
      "owner_id": 1
    }
  ]
  ```

#### `GET /api/v1/blogs/{blog_id}`

- **Description:**
  Retrieves a single blog post by its ID for the authenticated user. This endpoint is useful for checking the status or content of a specific blog post.
- **Response Example:**
  ```json
  {
    "id": 1,
    "title": "Top 5 Products Released at CES 2025",
    "content": "Generated content will appear here once processing is complete.",
    "status": "completed",
    "owner_id": 1
  }
  ```

#### `PUT /api/v1/blogs/{blog_id}`

- **Description:**
  Updates an existing blog post. The endpoint accepts a JSON payload with fields that can be updated (`title` and/or `content`). This allows users to modify the blog post if needed.
- **Request Body Example:**
  ```json
  {
    "title": "Updated Blog Post Title",
    "content": "Updated content..."
  }
  ```
- **Response Example:**
  ```json
  {
    "id": 1,
    "title": "Updated Blog Post Title",
    "content": "Updated content...",
    "status": "completed",
    "owner_id": 1
  }
  ```

#### `DELETE /api/v1/blogs/{blog_id}`

- **Description:**
  Deletes a specific blog post belonging to the authenticated user. This endpoint does not return a body on successful deletion.
- **Response:**
  HTTP 204 No Content

## Testing

This project uses `pytest` for testing. To run the tests, execute:

```bash
pytest
```

Ensure all tests pass before deploying or making significant changes.

## Design Decisions

- **Modular Architecture:**
  Clear separation between models, schemas, API endpoints, and background processing logic.
- **Asynchronous Background Tasks:**
  Long-running AI operations are handled outside the main request-response cycle to improve responsiveness.
- **Multi-Agent AI Integration:**
  Uses a combination of research, writing, and editing agents to produce quality blog content.
- **Security First:**
  Implements JWT for authentication and uses best practices for password hashing.

## Future Improvements

- **Enhanced Error Handling and Logging:**
  Integrate more robust logging and error management.
- **Extended AI Capabilities:**
  Fine-tune and expand AI agents for improved content quality and customization.
- **Dockerization:**
  Containerize the application for easier deployment.
- **CI/CD Integration:**
  Set up continuous integration and deployment pipelines.
- **Rate Limiting and Additional Security Measures:**
  Further secure the API endpoints.

## Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository.
2. Create a new branch for your feature or bug fix.
3. Make your changes and write tests as needed.
4. Submit a pull request with a clear description of your changes.


````
